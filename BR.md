Business requirements
=====================

*Version 1.2*

History
*  Version 1.0. November 20 2016. Rus
*  Version 1.1. November 30 2016. Rus
*  Version 1.2. Decempber 4 2016. Rus

# Боковая панель навигации

### Панель аккаунта

* Фото
* Логин
* Почта
* Статистика
	* Дата создания аккаунта
	* Дата первого рецепта
	* Дата последнего рецепта
	* Количество рецептов
	* Количество просмотров всех рецептов
* Кнопка перехода в экран настроек аккаунта
	* при отсутствии логина - вид 1 (большая кнопка)
	* при наличии логина - вид 2 (маленькая шестеренка)

### Панель навигации

Текущий экран выделяется. При наличии закладок в экране появляется подменю с переходами к
соответствующей закладке.
* Рецепты
* Покупки
* Продукы
* Метки
* Категории
* Настройки

# Рецепты

## Экран списка рецептов

### Панель действий

* Кнопка "боковая панель навигации"
* Поиск
    * Поле текста
    * Список последних текстов
    * Кнопка очистить последние тексты
* Вид - полный / сокращенный
* Группировка (группа + подгруппа /"группа в группе", имена групп те же/)
    * Все (без групп)
    * Закладки (простая пометка без названия)
    * Метки (пометка с названием)
    * Категории (супы, гарниры, десерты)
    * Калории
    * Белки, жиры, углеводы
    * Время (на 1000 грамм / на порцию)
    * Группа продуктов (овощи, фрукты, мясо, рыба)
* Сортировка (в т.ч. внутри группы)
    * По-умолчанию (без сортировки / сортировка группы)
    * По алфавиту
    * По автору
    * По дате создания
    * По дате изменения
    * По частоте доступа (рейтинг)
* Фильтр
    * По-умолчанию (без фильтра)
    * Автор
    * Фильтр группы
    * Фильтр подгруппы
    * Фильтр сортировки
* Сброс (Вид + группировка + сортировка + фильтр)
* Справка

### Список рецептов

Представляет карточки рецептов с белым фоном.

**Вид карточки рецептов:**

* Полный
    * большая картинка
    * кнопка изменения вида (полный / сокращенный)
    * название
    * описание
    * кнопка меню (добавить к покупкам, открыть, изменить, удалить)
    * закладка
    * метка
    * категория
    * калории
    * белки, жиры, углеводы
    * время (на 1000 грамм / на порцию)
    * три продукта с наибольшим количеством
    * автор
    * Дата создания
    * Дата изменения
    * частота доступа (рейтинг)
* Сокращенный
    * маленькая картинка
    * кнопка изменения вида (полный / сокращенный)
    * название
    * кнопка меню
    * автор (не отображается, если автор - пользователь)
    * Параметр группы (при наличии группировки)
    * Параметр сортировки (при наличии сортировки)

Полный вид отображается при отсутствии группировки, сокращенный - при наличии

**Фон списка** при группировке - картинка группы.

**Прокрутка списка**

* Вертикальный вид группировки списка - вниз-вверх
* Горизонтальной вид группировки списка -
    * вниз-вверх - прокрутка групп
    * вправо-влево - прокрутка рецептов

**Индикатор загрузки списка** - отображается на тулбаре в виде бегущей полосы.

**Вид списка при отсутствии данных**

* большая картинка с эмблемой рецептов
* надпись что рецептов нет

**Выделение элементов списка** - появляется меню на тулбаре, которое содержит:
* Количество выделенных рецептов
* Кнопки из меню рецепта (если выбрано несколько рецептов - без кнопок "открыть", "изменить")

**Выделение рецепта** осуществляется долгим нажатием. При выделении рецепт реагирует на выделение:
поднимается над другими или обводится контуром.

**Плавающая кнопка "добавить рецепт"** - отображается внизу справа. Скрывается при прокрутке вниз,
отображается при прокрутке вверх. Анимация появления (из центра стандартного положения)
при первом открытии списка, анимация исчезновения (в центр стандартного положения) при
переходе / выходе из списка.

## Экран просмотра группы рецептов

Переход - при нажатии на группе в списке рецептов.

### Панель действий
* Кнопка назад (с сохранением изменений)
* Большое фото группы
* Название группы
* Группировка (подгруппы - те же что и группы)
* Сортировка

### Рецепты группы
Содержит список карточек рецептов выбранной группы. Карточки отображаются по-умолчанию в полном виде.

**Плавающая кнопка "добавить рецепт"** - та же, что в списке рецептов.

## Экран просмотра рецепта

Представляет вертикальное однополосное отображение всех данных о рецепте.

**Переход**
* по нажатию на рецепт в списке рецептов
* из меню рецепта в списке рецептов
* из инструкций из редактора рецептов, закладки "инструкции"

### Панель действий

* Кнопка назад (с сохранением изменений)
* Большое фото
* название рецепта
* кнопка Закладка
* кнопка Метка
* кнопка Редактировать
* Кнопка Удалить (с подтверждением)
* Кнопка добавить/изменить фото

**Нажатие на фото**
* четное - максимально возможная ширина / высота
* нечетное - уменьшенная ширина / высота

### Данные рецепта

* все данные полного вида из карточки рецепта в списке
* Список ингредиентов (продукты и рецепты) с отображением количества / веса.
    * Ползунок изменения количества по нажатию на птичку раскрытия.
* Вес порции.
    * По нажатию - ввод веса.
    * Чекбокс фиксации веса порции при изменении веса ингредиента
    (пересчитывается вес остальных ингредиентов. по-умолчанию снят).
* Количество порций с ползунком изменения на +/- 1. По нажатию - ввод цифры.
* Вес рецепта с ползунком изменения на +/- 10(100) грамм (в зависимости от скорости).
По нажатию - ввод веса.
* Время рецепта.
    * Для одной порции - подсвечено утвердительно (вид времени 1).
    * Для > 1 порции изменяется линейно и подсвечено вопросительно (вид времени 2).
При вводе времени для > 1 порции сохраняется коэффициент (может быть 1 сохранение -
новое сменяет старое) и расчет времени производится пропорционально (линейно), после расчета
время подсвечивается утвердительно (вид времени 1).
* Список инструкций (этапы приготовления). Инструкции для рецепта-ингредиента доступны по кнопке
раскрывающегося списка (по-умолчанию - скрыт).

**Плавающая кнопка "добавить в корзину покупок"** - скрывается при прокрутке вниз, появляется при
прокрутке вверх. По-умолчанию видна. При нажатии - отображается снакбар с кнопкой перехода к
покупкам. Изменения параметров рецепта автоматически добавляются в покупки, если рецепт добавлен к
покупкам.

Внизу основного экрана содержатся предложения для перехода в похожие рецепты с корректным возвратом
назад и / или вверх (назад - к предыдущему рецепту, вверх - к списку рецептов).

## Экран редактора рецепта

**Переход**
* Кнопка добавить рецепт на списке рецептов
* Кнопка изменить на карточке рецепта в списке
* Кнопка редактировать на экране рецепта

### Панель действий
* Кнопка назад (с сохранением изменений)
* Название рецепта
* Кнопка удалить

### Закладка "данные рецепта"

* Фото, кнопка "изменить", кнопка "удалить"
* все данные полного вида из карточки рецепта в списке с возможностью ввода
* Вес порции. (Тот же функционал что на экране просмотра рецепта)
* Время рецепта. (Тот же функционал что на экране просмотра рецепта)

### Закладка "ингредиенты"

* Список ингредиентов (продукты и рецепты) с отображением количества / веса.
Ползунок изменения количества по нажатию на птичку раскрытия.
* Плавающая круглая кнопка "добавить", по нажатию – выбор "продукт" или "рецепт".
При выборе - переход на соответствующий экран - продукты / рецепты.
При простом нажатии на продукт / рецепт - возврат и добавление.
При долгом нажатии - выбор нескольких объектов с круглой кнопкой ОК,
по нажатию которой - возврат и добавление.
При нажатии хард/софт кнопки "назад" - возврат без добавления.

### Закладка "список инструкций"

* В верхней части содержит список не добавленных рецептов (если в ингредиентах есть рецепты,
а не только продукты)
* Номер по порядку инструкции. Отображается слева вверху, над полем ввода текста инструкции.
Содержит название рецепта, если инструкция является рецептом.
* Текст инструкции. Содержит кнопку "редактировать"/"сохранить" справа вверху поля текста.
Кнопка изменяется в зависимости от доступности ввода в поле текста инструкции.
При добавлении новой инструкции поле текста доступно для редактирования.
* При добавлении рецепта в качестве инструкции – становится доступна кнопка перехода в вложенный
рецепт (с фокусом на инструкциях) (заменяет кнопку "редактировать"/"сохранить" на тексте
инструкции). Переход обратно возвращается в эту же закладку. Текст инструкции не доступен для
редактирования и представляет список инструкций вложенного рецепта с номерами по порядку, начиная с
номера родительского рецепта.

При выходе из закладки все введенные данные сохраняются, в т.ч. несохраненные инструкции.

# Покупки

## Экран покупок

Содержит список продуктов из добавленных в корзину рецептов. Вес и наличие продуктов отражает
последнее сохраненное состояние рецепта (подтягивается при переходе в экран).

**Переход**
* Из бокового меню
* При нажатии на снакбаре после добавления рецепта в корзину покупок.

### Панель действий

* Кнопка назад (с сохранением изменений)
* Заголовок - название закладки
* Кнопка вида - отображать полный / сокращенный вид (скрываются строки рецептов во всех карточках
покупок).
* Кнопка "очистить"
* Кнопка "поделиться"

### Закладка "покупки"

Содержит список карточек покупок. Список разделен на две части подзаголовком "куплено".
При нажатии на чекбокс "куплено" в карточке покупки - карточка перемещается под подзаголовок
"куплено". При снятии чекбокса - в верхнюю часть списка. За подзаголовком "куплено" отображаются
покупки, с поставленным чекбоксом менее чем 12 часаов назад.

**Вид карточки покупки:**

* Заголовок: иконка и название продукта. По нажатию на иконку - переход в экран продукта.
* Кнопка раскрытия/скрытия строк рецептов
* Строки рецептов: иконка рецепта, название рецепта, вес продукта. Меню строки рецепта
(исключить из текущего продукта, исключить весь рецепт, перейти в рецепт). По нажатию на иконку
рецепта - переход в экран рецепта.
* Строка итога - сумма веса продукта из всех рецептов.
* Чекбокс "куплено". При нажатии - перемещается вниз списка и отображается снакбар с кнопкой
"отменить".

При долгом нажатии на карточку продукта - открывается верхнее меню с перечнем количества выделенных
карточек и кнопкой "удалить из списка покупок". При этом перечень купленных продуктов скрывается.

### Закладка "рецепты"

Отображает список рецептов, добавленных для покупок. Содержит иконку рецепта, название,
кнопку "удалить из покупок".

### Закладка "история покупок"

Содержит список карточек покупок. При снятии чекбокса "куплено" - карточка переходит в закладку
"покупки" и отображается снакбар с кнопкой "отменить".

Список карточек покупок сгруппирован по датам покупок. Название группы отображается вверху и
содержит дату покупки. Покупки с другой датой отображаются под новым названием группы, которое
прокручивается при движении по списку. При достижении новой группы название фиксируется вверху.
При прокрутке списка при помощи ползунка - отображается дата группы рядом с ползунком прокрутки.

# Продукты

## Экран списка продуктов

**Переход**

* из бокового меню. вид карточек по-умолчанию: полный.
* из рецепта для добавления продукта: вид карточек по-умолчанию: сокращенный.

### Панель действий

* Кнопка назад (с сохранением изменений)
* Заголовок - название закладки
* Поиск
* Кнопка вида - отображать полный / сокращенный вид (для закладки "продукты")
* Кнопка группировки - простой список / группы продуктов. (для закладки "продукты").
* Кнопка "создать продукт" - только при переходе для выбора продукта.

## Закладка "продукты"

Содержит список с карточками продуктов.

**Полный вид карточки продукта:**
* Картинка
* Название
* Меню 
	* изменить
	* скопировать в новый
	* удалить
	* добавить группу (если нет)
	* изменить группу (если есть)
	* удалить группу (если есть)
* Группа (при нажатой группировке - не отображается)
* Белки
* Жиры
* Углеводы
* Энергетическая ценность
* Единица измерения

**Сокращенный вид карточки продукта** - содержит только картинку и название.

**Меню карточки продукта** - при выборе "изменить" открывается экран редактора продукта. При 
выборе "скопировать в новый" - открывается экран редактора продукта с созданием нового 
продукта. При выборе "добавить группу" - выбор групп во всплывающем окне.

**Единицы измерения** - принимают значение "вес" и "особая единица". При выборе "особой 
единицы" - если есть единица для продукта - то добавляется ее имя, если нет - осуществляется 
переход в создание "особой единицы".

**Плавающая кнопка:**
* "создать продукт" - при переходе из бокового меню
* "ок" - при переходе для выбора продуктов для рецепта при этом "создать продукт" - отображается 
на панели действий.

## Закладка "группы продуктов"

Содержит простой список групп продуктов - картинка и название группы продуктов. На каждой 
группе есть кнопка редактирования - во всплывающем окне отображается название группы, 
картинка, кнопки изменения и удаления картинки, кнопка удаления группы. При удалении группы - 
продукты с удаляемой группой так же изменяются (становятся без группы).

**Плавающая кнопка** - добавить группу продуктов.

## Закладка "особые единицы"

Содержит список особых единиц с группировкой (активные / не активные) если есть не активные.
* Название продукта
* Название особой единицы
* Вес в граммах
* Кнопка удалить (с подтверждением, если единица активна) переводит продукт в вес, удаляет 
особую единицу.
* Кнопка изменить - ввод данных во всплывающем окне. Выбор продукта во всплывающем окне.

Активная единица - продукт использует единицу, не активная - не использует.

Если есть неактивные единицы, они отображаются вверху списка с кнопкой "удалить неактивные" 
на заголовке группы.

## Экран Редактор продукта

Содержит все данные карточки продукта. Дополнительно содержит описание продукта и 
дату изменения. Данные продукта изменяются во всплывающем окне / встроенном текстовом редакторе 
(в зависимости от их типа).

# Метки

## Экран Редактор меток

Содержит простой список названий меток с кнопкой изменения названия. При нажатии кнопки - название
метки становится доступным для редактирования.
Плавающая кнопка - добавление метки.
При долгом выделении - выделяется метка и появляется верхнее меню с количеством меток 
и кнопкой "удалить".

# Категории

## Экран Редактор категорий

Содержит простой список категорий. Фон категории заполняется картинкой категории. Высота списка - 
больше стандартной. На списке отображается название категории и кнопка "меню".

**Меню категории**
* Переименовать
* Удалить
* Изменить картинку
* Удалить картинку

**Плавающая кнопка** - добавление новой категории.
При долгом выделении - выделяется категория и появляется верхнее меню с количеством категорий
и кнопкой "удалить".

# Настройки

## 
